<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>VAMA Clinic - Patient Management</title>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 <style>
 /* Reset and base styles */
 * {
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
 }
 :root {
 --primary: #2563eb;
 --primary-dark: #1d4ed8;
 --secondary: #64748b;
 --light: #f8fafc;
 --dark: #1e293b;
 --success: #10b981;
 --warning: #f59e0b;
 --danger: #ef4444;
 --sidebar-width: 250px;
 }
 body {
 display: flex;
 min-height: 100vh;
 background-color: #f1f5f9;
 color: var(--dark);
 }
 /* Sidebar Styles */
 .sidebar {
 width: var(--sidebar-width);
 background: var(--dark);
 color: white;
 height: 100vh;
 position: fixed;
 transition: all 0.3s ease;
 z-index: 1000;
 overflow-y: auto;
 }
 .sidebar-header {
 padding: 20px;
 border-bottom: 1px solid #334155;
 display: flex;
 align-items: center;
 gap: 10px;
 position: relative;
 }
 /* Logo removed from sidebar - now in header */
 .sidebar-menu {
 padding: 15px 0;
 }
 .sidebar-menu ul {
 list-style: none;
 }
 .sidebar-menu li {
 margin-bottom: 5px;
 }
 .sidebar-menu a {
 display: flex;
 align-items: center;
 gap: 12px;
 padding: 12px 20px;
 color: #cbd5e1;
 text-decoration: none;
 transition: all 0.3s;
 min-height: 44px; /* Better touch targets */
 }
 .sidebar-menu a:hover, .sidebar-menu a.active {
 background-color: #334155;
 color: white;
 border-left: 4px solid var(--primary);
 }
 .sidebar-menu i {
 width: 20px;
 text-align: center;
 }
 /* Mobile Menu Toggle */
 .mobile-menu-toggle {
 display: none;
 position: fixed;
 top: 20px;
 left: 20px;
 background: var(--primary);
 color: white;
 border: none;
 border-radius: 6px;
 width: 44px;
 height: 44px;
 align-items: center;
 justify-content: center;
 z-index: 1100;
 cursor: pointer;
 }
 /* Overlay for mobile */
 .sidebar-overlay {
 display: none;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background: rgba(0, 0, 0, 0.5);
 z-index: 999;
 }
 .sidebar-overlay.active {
 display: block;
 }
 /* Main Content Styles */
 .main-content {
 flex: 1;
 margin-left: var(--sidebar-width);
 padding: 20px;
 transition: all 0.3s ease;
 width: calc(100% - var(--sidebar-width));
 }
 /* Header Styles with Logo */
 .header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 5px 5px;
 background: white;
 border-radius: 10px;
 box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
 margin-bottom: 25px;
 }
 .header-left {
 display: flex;
 align-items: center;
 gap: 15px;
 }
 .header-logo {
 display: flex;
 align-items: center;
 gap: 10px;
 }
 .vama-striped {
 font-family: 'Arial Black', 'Arial', sans-serif;
 font-size: 28px;
 font-weight: 900;
 text-transform: uppercase;
 letter-spacing: 2px;
 line-height: 1;
 }
 .v {
 background-image: repeating-linear-gradient(90deg,
 #448fdf 0px 1px,
 transparent 3px 5px);
 background-clip: text;
 -webkit-background-clip: text;
 color: transparent;
 display: inline-block;
 }
 .ama {
 background-image: repeating-linear-gradient(90deg,
 #c43753 0px 1px,
 transparent 3px 5px);
 background-clip: text;
 -webkit-background-clip: text;
 color: transparent;
 display: inline-block;
 }
 .clinic-name {
 font-size: 14px;
 font-weight: bold;
 color: #75b0eb;
 letter-spacing: 1px;
 margin-top: 5px;
 }
 .header-title h1 {
 font-size: 1.8rem;
 color: var(--dark);
 font-weight: 600;
 }
 .header-title p {
 color: var(--secondary);
 font-size: 0.9rem;
 }
 .header-right {
 display: flex;
 align-items: center;
 gap: 20px;
 }
 .user-profile {
 display: flex;
 align-items: center;
 gap: 10px;
 background: var(--light);
 padding: 8px 15px;
 border-radius: 30px;
 cursor: pointer;
 position: relative;
 min-height: 44px; /* Better touch targets */
 }
 .user-profile img {
 width: 35px;
 height: 35px;
 border-radius: 50%;
 object-fit: cover;
 }
 .user-dropdown {
 position: absolute;
 top: 100%;
 right: 0;
 background: white;
 border-radius: 8px;
 box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
 width: 180px;
 padding: 10px 0;
 margin-top: 5px;
 display: none;
 z-index: 100;
 }
 .user-dropdown.active {
 display: block;
 }
 .user-dropdown-item {
 padding: 10px 15px;
 cursor: pointer;
 transition: background 0.2s;
 display: flex;
 align-items: center;
 gap: 10px;
 min-height: 44px; /* Better touch targets */
 }
 .user-dropdown-item:hover {
 background: var(--light);
 }
 .user-dropdown-item.active {
 background: #e0f2fe;
 color: var(--primary);
 font-weight: 500;
 }
 .notification-icon {
 position: relative;
 font-size: 1.3rem;
 color: var(--secondary);
 cursor: pointer;
 min-height: 44px; /* Better touch targets */
 display: flex;
 align-items: center;
 }
 .notification-badge {
 position: absolute;
 top: -5px;
 right: -5px;
 background: var(--danger);
 color: white;
 border-radius: 50%;
 width: 18px;
 height: 18px;
 font-size: 0.7rem;
 display: flex;
 align-items: center;
 justify-content: center;
 }
 /* Page Container */
 .page-container {
 max-width: 1200px;
 margin: 0 auto;
 }
 .page {
 display: none;
 background: white;
 border-radius: 10px;
 box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
 overflow: hidden;
 margin-bottom: 30px;
 }
 .page.active {
 display: block;
 }
 .page-title {
 font-size: 14px;
 color: #2c3e50;
 padding: 4px;
 border-bottom: 1px solid #eee;
 background: #f8f9fa;
 }
 /* Form Styling */
 .registration-form {
 padding: 30px;
 }
 .form-group {
 margin-bottom: 20px;
 }
 .form-row {
 display: flex;
 flex-wrap: wrap;
 margin: 0 -10px;
 }
 .form-column {
 flex: 1;
 padding: 0 10px;
 min-width: 250px;
 }
 label {
 display: block;
 margin-bottom: 8px;
 font-weight: 600;
 color: #2c3e50;
 }
 label.required::after {
 content: " *";
 color: #e74c3c;
 }
 input, select, textarea {
 width: 100%;
 padding: 4px 7px;
 border: 1px solid #ddd;
 border-radius: 6px;
 font-size: 16px; /* Prevents zoom on iOS */
 transition: all 0.3s;
 }
 input:focus, select:focus, textarea:focus {
 outline: none;
 border-color: var(--primary);
 box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
 }
 .form-note {
 font-size: 14px;
 color: #7f8c8d;
 margin-top: 5px;
 font-style: italic;
 }
 /* Vital Signs Section */
 .vital-signs {
 background: #f8f9fa;
 padding: 20px;
 border-radius: 8px;
 margin: 25px 0;
 }
 .section-title {
 font-size: 18px;
 color: #2c3e50;
 margin-bottom: 15px;
 padding-bottom: 8px;
 border-bottom: 1px solid #ddd;
 }
 /* Button Styling */
 .form-buttons {
 display: flex;
 justify-content: center;
 gap: 20px;
 margin-top: 30px;
 }
 .btn {
 padding: 12px 30px;
 border: none;
 border-radius: 6px;
 font-size: 16px;
 font-weight: 600;
 cursor: pointer;
 transition: all 0.3s;
 display: flex;
 align-items: center;
 gap: 8px;
 min-height: 44px; /* Better touch targets */
 }
 .btn-submit {
 background: var(--primary);
 color: white;
 }
 .btn-submit:hover {
 background: var(--primary-dark);
 transform: translateY(-2px);
 box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
 }
 .btn-clear {
 background: var(--danger);
 color: white;
 }
 .btn-clear:hover {
 background: #c0392b;
 transform: translateY(-2px);
 box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
 }
 /* Table Styling */
 .appointments-container, .database-container {
 padding: 20px;
 }
 .search-container {
 background: var(--light);
 padding: 5px;
 border-radius: 1px;
 margin-bottom: 5px;
 }
 .search-box {
 display: flex;
 gap: 15px;
 flex-wrap: wrap;
 }
 .search-input {
 flex: 1;
 min-width: 250px;
 position: relative;
 }
 .search-input input {
 width: 100%;
 padding: 16px 15px 12px 40px;
 border: 1px solid #cbd5e1;
 border-radius: 6px;
 font-size: 1rem;
 transition: all 0.3s;
 }
 .search-input input:focus {
 outline: none;
 border-color: var(--primary);
 box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
 }
 .search-input i {
 position: absolute;
 left: 15px;
 top: 50%;
 transform: translateY(-50%);
 color: var(--secondary);
 }
 .table-container {
 overflow-x: auto;
 margin-top: 20px;
 }
 .appointments-table, .database-table {
 width: 100%;
 border-collapse: collapse;
 margin-top: 20px;
 }
 .appointments-table th, .database-table th {
 background: var(--primary);
 color: white;
 padding: 5px;
 text-align: left;
 font-weight: 600;
 }
 .appointments-table td, .database-table td {
 padding: 12px 15px;
 border-bottom: 1px solid #eee;
 }
 .appointments-table tr:nth-child(even), .database-table tr:nth-child(even) {
 background: #f8f9fa;
 }
 .appointments-table tr:hover, .database-table tr:hover {
 background: #e3f2fd;
 }
 .status-badge {
 padding: 5px 10px;
 border-radius: 20px;
 font-size: 12px;
 font-weight: 600;
 }
 .status-scheduled {
 background: #e8f5e9;
 color: #2e7d32;
 }
 .status-completed {
 background: #e3f2fd;
 color: #1565c0;
 }
 .status-cancelled {
 background: #ffebee;
 color: #c62828;
 }
 .action-btn {
 padding: 8px 12px;
 border: none;
 border-radius: 4px;
 cursor: pointer;
 font-size: 14px;
 margin-right: 5px;
 min-height: 36px; /* Better touch targets */
 min-width: 36px;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 }
 .btn-edit {
 background: var(--warning);
 color: #212529;
 }
 .btn-delete {
 background: var(--danger);
 color: white;
 }
 /* Role Badge */
 .role-badge {
 display: inline-block;
 padding: 4px 8px;
 border-radius: 4px;
 font-size: 0.7rem;
 font-weight: 600;
 margin-left: 5px;
 }
 .role-admin {
 background: var(--primary);
 color: white;
 }
 .role-receptionist {
 background: var(--success);
 color: white;
 }
 /* Mobile Cards for Table Data */
 .mobile-cards {
 display: none;
 }
 .mobile-card {
 background: white;
 border-radius: 8px;
 padding: 15px;
 margin-bottom: 15px;
 box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
 }
 .mobile-card-row {
 display: flex;
 justify-content: space-between;
 margin-bottom: 10px;
 padding-bottom: 10px;
 border-bottom: 1px solid #e2e8f0;
 }
 .mobile-card-row:last-child {
 margin-bottom: 0;
 border-bottom: none;
 }
 .mobile-card-label {
 font-weight: 600;
 color: var(--secondary);
 }
 /* Echo Report Styles */
 .echo-container {
 background: white;
 border-radius: 10px;
 box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
 padding: 5px;
 margin-bottom: 30px;
 }
 .echo-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 20px;
 padding-bottom: 5px;
 border-bottom: 1px solid #e2e8f0;
 }
 .echo-header h2 {
 font-size: 1.5rem;
 color: var(--dark);
 font-weight: 600;
 }
 .echo-controls {
 display: flex;
 gap: 10px;
 flex-wrap: wrap;
 }
 .echo-controls button {
 padding: 10px 15px;
 border: none;
 border-radius: 6px;
 font-weight: 500;
 cursor: pointer;
 transition: all 0.3s;
 display: flex;
 align-items: center;
 gap: 8px;
 min-height: 44px; /* Better touch targets */
 }
 .preset-btn {
 background: var(--light);
 color: var(--dark);
 border: 1px solid #cbd5e1;
 }
 .preset-btn:hover {
 background: #e2e8f0;
 }
 .edit-btn {
 background: var(--warning);
 color: white;
 }
 .edit-btn:hover {
 background: #e58e0c;
 }
 .save-btn {
 background: var(--success);
 color: white;
 }
 .save-btn:hover {
 background: #0da271;
 }
 .print-btn {
 background: var(--primary);
 color: white;
 }
 .print-btn:hover {
 background: var(--primary-dark);
 }
 .pdf-btn {
 background: var(--danger);
 color: white;
 }
 .pdf-btn:hover {
 background: #dc2626;
 }
 /* Report Page Styling */
 .report-page {
 width: 100%;
 max-width: 210mm;
 min-height: 297mm;
 padding: 15mm;
 margin: 0 auto;
 background: white;
 box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
 position: relative;
 }
 /* Header & Branding */
 .report-header {
 display: flex;
 align-items: center;
 justify-content: space-between;
 margin-bottom: 12px;
 border-bottom: 2px solid #000;
 padding-bottom: 8px;
 }
 .report-logo {
 width: 70px;
 height: 70px;
 background: linear-gradient(135deg, #0073e6, #c43753);
 border-radius: 8px;
 display: flex;
 align-items: center;
 justify-content: center;
 color: white;
 font-weight: bold;
 font-size: 10px;
 text-align: center;
 padding: 4px;
 }
 .report-vama-center {
 flex: 1;
 text-align: center;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 }
 .report-vama-striped {
 font-family: 'Arial Black', 'Arial', sans-serif;
 font-size: 60px;
 font-weight: 900;
 text-transform: uppercase;
 letter-spacing: 3px;
 line-height: 1;
 margin-bottom: 4px;
 }
 .report-v {
 background-image: repeating-linear-gradient(90deg,
 #448fdf 0px 1px,
 transparent 3px 5px);
 background-clip: text;
 -webkit-background-clip: text;
 color: transparent;
 display: inline-block;
 }
 .report-ama {
 background-image: repeating-linear-gradient(90deg,
 #c43753 0px 1px,
 transparent 3px 5px);
 background-clip: text;
 -webkit-background-clip: text;
 color: transparent;
 display: inline-block;
 }
 .report-clinic-name {
 font-size: 12px;
 font-weight: bold;
 color: #75b0eb;
 letter-spacing: 0.8px;
 margin: 0;
 }
 .report-header-right {
 text-align: right;
 font-size: 12px;
 color: #555;
 }
 /* Doctor Section */
 .report-doctors {
 display: flex;
 justify-content: space-between;
 margin-top: 8px;
 border-top: 2px solid #0073e6;
 border-bottom: 2px solid #0073e6;
 padding: 6px 0;
 position: relative;
 }
 .report-doctors::before {
 content: "";
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 width: 2px;
 height: 80%;
 background-color: #0073e6;
 }
 .report-doctor {
 width: 45%;
 font-size: 12px;
 line-height: 1.3;
 padding: 0 8px;
 }
 .report-doctor b {
 font-size: 13px;
 color: #2c3e50;
 }
 /* Patient Info */
 .report-patient-info {
 margin-top: 12px;
 padding: 10px;
 /* background-color: #f8f9fa; */
 border-radius: 4px;
 flex-direction: row;
 box-shadow: 0 2px 4px rgba(0,0,0,0.05);
 }
 .report-patient-info table {
 width: 100%;
 border-collapse: collapse;
 }
 .report-patient-info td {
 padding: 4px 8px;
 vertical-align: top;
 }
 .report-patient-info b {
 color: #2c3e50;
 }
 /* Report Title */
 .report-title {
 text-align: center;
 margin: 20px 0 12px;
 font-weight: bold;
 font-size: 16px;
 text-decoration: underline;
 color: #2c3e50;
 }
 /* Report Body */
 .report-body {
 font-size: 13px;
 line-height: 1.5;
 padding: 0 8px;
 }
 .report-section {
 margin-bottom: 15px;
 }
 .section-title {
 font-weight: bold;
 color: #2c3e50;
 margin-bottom: 8px;
 font-size: 14px;
 border-bottom: 1px solid #ddd;
 padding-bottom: 4px;
 }
 .report-body b {
 color: #2c3e50;
 }
 /* Lists */
 .report-list {
 margin-left: 20px;
 margin-bottom: 10px;
 }
 .report-list li {
 margin-bottom: 5px;
 }
 /* Signature */
 .report-signature {
 margin-top: 40px;
 font-size: 13px;
 text-align: right;
 padding-right: 15px;
 }
 .report-signature b {
 color: #2c3e50;
 }
 /* Footer */
 .report-footer {
 position: absolute;
 bottom: 0;
 left: 0;
 width: 100%;
 background: #0073e6;
 color: #fff;
 text-align: center;
 font-size: 12px;
 padding: 6px 0;
 }
 /* Print Styles */
 @media print {
 body {
 background: white;
 padding: 0;
 }

 .report-page {
 width: 100%;
 height: 100%;
 margin: 0;
 padding: 15mm;
 box-shadow: none;
 }

 .echo-controls, .echo-header, .sidebar, .header, .consult-edit-controls, .consult-controls, .mobilereport-controls {
 display: none;
 }
 }
 /* Hidden class for toggle functionality */
 .hidden {
 display: none !important;
 }
 /* Footer */
 .footer {
 text-align: center;
 padding: 20px;
 background: var(--primary);
 color: white;
 font-size: 14px;
 margin-top: 30px;
 border-radius: 10px;
 }
 /* Consultation Report Styles */
 .patient-info-row {
 display: flex;
 margin-bottom: 8px;
 }
 .patient-info-item {
 flex: 1;
 padding: 0 10px;
 }
 .patient-info-item b {
 color: #2c3e50;
 }
 .indication-row {
 margin-top: 10px;
 padding-top: 10px;
 border-top: 1px dashed #ccc;
 }
 /* Data Tables - No borders */
 .data-table {
 width: 100%;
 border-collapse: collapse;
 margin: 10px 0;
 }
 .data-table td {
 padding: 6px 10px;
 border: none;
 }
 .data-table tr:nth-child(even) {
 background-color: transparent;
 }
 /* Echo Edit Controls */
 .echo-edit-controls {
 display: none;
 background: #f8f9fa;
 padding: 15px;
 border-radius: 8px;
 margin: 15px 0;
 border: 1px solid #e2e8f0;
 }
 .echo-edit-controls.active {
 display: block;
 }
 .echo-edit-buttons {
 display: flex;
 flex-wrap: wrap;
 gap: 10px;
 margin-bottom: 15px;
 }
 .echo-edit-btn {
 padding: 8px 15px;
 background: var(--primary);
 color: white;
 border: none;
 border-radius: 4px;
 cursor: pointer;
 font-size: 14px;
 min-height: 36px; /* Better touch targets */
 }
 .echo-edit-btn:hover {
 background: var(--primary-dark);
 }
 /* Consultation Edit Controls */
 .consult-edit-controls {
 display: none;
 background: #f8f9fa;
 padding: 15px;
 border-radius: 8px;
 margin: 15px 0;
 border: 1px solid #e2e8f0;
 }
 .consult-edit-controls.active {
 display: block;
 }
 .consult-edit-section {
 margin-bottom: 15px;
 }
 .consult-edit-row {
 display: flex;
 gap: 15px;
 margin-bottom: 10px;
 flex-wrap: wrap;
 }
 .consult-edit-item {
 flex: 1;
 min-width: 200px;
 }
 .consult-edit-item label {
 display: block;
 margin-bottom: 5px;
 font-weight: 600;
 color: #2c3e50;
 }
 .consult-text-input {
 width: 100%;
 padding: 8px 12px;
 border: 1px solid #ddd;
 border-radius: 4px;
 font-size: 14px;
 }
 /* Gap line styling */
 .gap-line {
 
 padding-bottom: 10px;
 }
 /* Consultation Controls (Buttons at top) */
 .consult-controls {
 display: flex;
 flex-wrap: wrap;
 gap: 10px;
 margin-bottom: 20px;
 padding: 15px;
 background: #f8f9fa;
 border-radius: 8px;
 }
 .consult-controls button {
 padding: 10px 15px;
 border: none;
 border-radius: 6px;
 font-weight: 500;
 cursor: pointer;
 transition: all 0.3s;
 display: flex;
 align-items: center;
 gap: 8px;
 min-height: 44px; /* Better touch targets */
 }
 /* Mobile Report Controls */
 .mobile-report-controls {
 display: none;
 position: fixed;
 top: 50%;
 left: 10px;
 transform: translateY(-50%);
 z-index: 1000;
 flex-direction: column;
 gap: 10px;
 }
 .mobile-report-controls.active {
 display: flex;
 }
 .mobile-report-btn {
 width: 50px;
 height: 50px;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 background: var(--primary);
 color: white;
 border: none;
 box-shadow: 0 4px 8px rgba(0,0,0,0.2);
 cursor: pointer;
 font-size: 18px;
 transition: all 0.3s;
 }
 .mobile-report-btn:hover {
 transform: scale(1.1);
 }
 .mobile-report-btn.save {
 background: var(--success);
 }
 .mobile-report-btn.print {
 background: var(--primary);
 }
 .mobile-report-btn.pdf {
 background: var(--danger);
 }
 .mobile-report-btn.edit {
 background: var(--warning);
 }
 .mobile-report-btn.preset {
 background: var(--secondary);
 }
 .mobile-report-expanded {
 display: none;
 position: fixed;
 top: 50%;
 left: 70px;
 transform: translateY(-50%);
 z-index: 1000;
 flex-direction: column;
 gap: 10px;
 background: white;
 padding: 15px;
 border-radius: 10px;
 box-shadow: 0 4px 15px rgba(0,0,0,0.2);
 max-height: 80vh;
 overflow-y: auto;
 width: 250px;
 }
 .mobile-report-expanded.active {
 display: flex;
 }
 .mobile-report-expanded button {
 padding: 10px 15px;
 border: none;
 border-radius: 6px;
 font-weight: 500;
 cursor: pointer;
 transition: all 0.3s;
 display: flex;
 align-items: center;
 gap: 8px;
 width: 100%;
 justify-content: flex-start;
 min-height: 44px; /* Better touch targets */
 }

 /* Bottom Navigation Bar for Mobile */
 .bottom-nav {
 display: none;
 position: fixed;
 bottom: 0;
 left: 0;
 right: 0;
 background: white;
 border-top: 1px solid #e2e8f0;
 z-index: 1000;
 padding: 5px 0;
 justify-content: space-around;
 box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
 }

 .bottom-nav-item {
 display: flex;
 flex-direction: column;
 align-items: center;
 padding: 8px 5px;
 text-decoration: none;
 color: var(--secondary);
 font-size: 0.7rem;
 flex: 1;
 min-height: 60px;
 }

 .bottom-nav-item.active {
 color: var(--primary);
 }

 .bottom-nav-item i {
 font-size: 1.2rem;
 margin-bottom: 2px;
 }

 /* Enhanced Mobile Responsive Design */
 @media (max-width: 992px) {
 .sidebar {
 width: 250px;
 transform: translateX(-100%);
 }

 .sidebar.active {
 transform: translateX(0);
 }

 .sidebar-header h2, .sidebar-menu span {
 display: block;
 }

 .sidebar-header {
 justify-content: flex-start;
 }

 .sidebar-menu a {
 justify-content: flex-start;
 padding: 12px 20px;
 }

 .main-content {
 margin-left: 0;
 width: 100%;
 padding-bottom: 70px; /* Space for bottom nav */
 }

 .mobile-menu-toggle {
 display: flex;
 }
 .echo-controls, .consult-controls {
 flex-direction: column;
 }

 .echo-controls button, .consult-controls button {
 width: 100%;
 justify-content: center;
 }
 .report-page {
 width: 100%;
 padding: 10px;
 min-height: auto;
 box-shadow: none;
 margin-bottom: 20px;
 }
 .report-vama-striped {
 font-size: 40px;
 }
 .report-doctors {
 flex-direction: column;
 }
 .report-doctors::before {
 display: none;
 }
 .report-doctor {
 width: 100%;
 margin-bottom: 10px;
 }
 .mobile-report-controls {
 display: flex;
 }
 .echo-controls, .consult-controls {
 display: none;
 }

 /* Show bottom navigation on mobile */
 .bottom-nav {
 display: flex;
 }
 }
 @media (max-width: 768px) {
 .header {
 flex-direction: row;
 gap: 15px;
 align-items: flex-start;
 padding: 15px;
 }

 .header-left {
 flex-direction: column;
 align-items: flex-start;
 gap: 10px;
 }

 .header-right {
 width: 100%;
 justify-content: space-between;
 }

 .form-row {
 flex-direction: column;
 margin: 0;
 }

 .form-column {
 width: 100%;
 padding: 0;
 margin-bottom: 15px;
 }

 input, select, textarea {
 padding: 14px 12px; /* Larger touch targets */
 }

 .vama-striped {
 font-size: 36px;
 }

 .search-box {
 flex-direction: column;
 }

 .search-input {
 min-width: 100%;
 }

 /* Show tables horizontally scrollable on mobile */
 .table-container {
 display: block;
 overflow-x: auto;
 white-space: nowrap;
 }

 .mobile-cards {
 display: none; /* Hide cards, show tables */
 }

 .form-buttons {
 flex-direction: column;
 gap: 10px;
 }

 .btn {
 width: 100%;
 justify-content: center;
 }
 .report-vama-striped {
 font-size: 30px;
 }

 .report-header {
 flex-direction: row;
 gap: 10px;
 text-align: center;
 }
 .report-logo {
 align-self: center;
 }
 .report-header-right {
 text-align: center;
 }
 
 /* Fix report doctors layout for mobile */
 .report-doctors {
 flex-direction: row;
 gap: 10px;
 }
 
 .report-doctor {
 width: 100%;
 text-align: center;
 }
 
 .report-doctor:last-child {
 text-align: center;
 }
 
 /* Fix patient info table for mobile */
 .report-patient-info table {
 display: block;
 }
 
 .report-patient-info tr {
 display: table-row;
    margin-bottom: 0;
    padding: 0;
    background: transparent;
    border-radius: 0;
 }
 
 .report-patient-info td {
 display: table-cell;
    padding: 1px 2px;
    width: auto;
    border: none;
    vertical-align: top;
 }
 
 .report-patient-info td:first-child {
 font-weight: 600;
 color: #2c3e50;
 }
 }
 @media (max-width: 480px) {
 .main-content {
 padding: 10px;
 }

 .content {
 padding: 15px;
 }

 .header-left h1 {
 font-size: 1.5rem;
 }

 .content-header h2 {
 font-size: 1.3rem;
 }

 .user-profile span {
 display: none;
 }
 .report-vama-striped {
 font-size: 24px;
 }
 .report-clinic-name {
 font-size: 10px;
 }
 .report-doctor {
 font-size: 10px;
 }
 .report-body {
 font-size: 12px;
 }

 .registration-form {
 padding: 12px 15px;
 }

 .page-title {
 padding: 5px;
 font-size: 12px;
 }

 .vital-signs {
 padding: 15px;
 }

 .search-container {
 padding: 15px;
 }

 .echo-container, .appointments-container, .database-container {
 padding: 15px;
 }

 .bottom-nav-item {
 font-size: 0.6rem;
 padding: 5px 2px;
 }

 .bottom-nav-item i {
 font-size: 1rem;
 }
 
 /* Consultation report mobile fixes */
 .consult-patient-info {
 padding: 10px;
 }
 
 .patient-info-row {
 flex-direction: column;
 gap: 8px;
 }
 
 .patient-info-item {
 width: 100%;
 padding: 0;
 }
 
 .gap-line {
 margin: 8px 0;
 padding-bottom: 8px;
 }
 }
 </style>
</head>
<body>

 <!-- Overlay for mobile sidebar -->
 <div class="sidebar-overlay" id="sidebar-overlay"></div>
 <!-- Sidebar -->
 <div class="sidebar" id="sidebar">
 <div class="sidebar-header">
 <!-- Logo removed from sidebar -->
 </div>
 <nav class="sidebar-menu">
 <ul>
 <li><a href="#" class="active" data-page="registration"><i class="fas fa-user-plus"></i> Patient
Registration</a></li>
 <li><a href="#" data-page="appointments"><i class="fas fa-calendar-check"></i>
Appointments</a></li>
 <li><a href="#" data-page="echo"><i class="fas fa-heartbeat"></i> Echo Reports</a></li>
 <li><a href="#" data-page="consultation"><i class="fas fa-user-md"></i> Consultation</a></li>
 <li><a href="#" data-page="database"><i class="fas fa-database"></i> Database</a></li>
 </ul>
 </nav>
 </div>

 <!-- Bottom Navigation for Mobile -->
 <nav class="bottom-nav" id="bottom-nav">
 <a href="#" class="bottom-nav-item active" data-page="registration">
 <i class="fas fa-user-plus"></i>
 <span>Register</span>
 </a>
 <a href="#" class="bottom-nav-item" data-page="appointments">
 <i class="fas fa-calendar-check"></i>
 <span>Appointments</span>
 </a>
 <a href="#" class="bottom-nav-item" data-page="echo">
 <i class="fas fa-heartbeat"></i>
 <span>Echo</span>
 </a>
 <a href="#" class="bottom-nav-item" data-page="consultation">
 <i class="fas fa-user-md"></i>
 <span>Consult</span>
 </a>
 <a href="#" class="bottom-nav-item" data-page="database">
 <i class="fas fa-database"></i>
 <span>Database</span>
 </a>
 </nav>

 <!-- Mobile Report Controls -->
 <div class="mobile-report-controls" id="mobile-report-controls">
 <button class="mobile-report-btn preset" id="mobile-preset-btn">
 <i class="fas fa-cogs"></i>
 </button>
 <button class="mobile-report-btn edit" id="mobile-edit-btn">
 <i class="fas fa-edit"></i>
 </button>
 <button class="mobile-report-btn save" id="mobile-save-btn">
 <i class="fas fa-save"></i>
 </button>
 <button class="mobile-report-btn print" id="mobile-print-btn">
 <i class="fas fa-print"></i>
 </button>
 <button class="mobile-report-btn pdf" id="mobile-pdf-btn">
 <i class="fas fa-file-pdf"></i>
 </button>
 </div>
 <!-- Mobile Report Expanded Controls -->
 <div class="mobile-report-expanded" id="mobile-preset-expanded">
 <button class="preset-btn" onclick="applyEchoPreset('Normal')">
 <i class="fas fa-heartbeat"></i> Normal
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('ASD')">
 <i class="fas fa-heart"></i> ASD
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('PDA')">
 <i class="fas fa-heart"></i> PDA
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('VSD')">
 <i class="fas fa-heart"></i> VSD
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('TOF')">
 <i class="fas fa-heart"></i> TOF
 </button>
 <button class="preset-btn" onclick="applyConsultPreset('vsd')">
 <i class="fas fa-heart"></i> VSD
 </button>
 <button class="preset-btn" onclick="applyConsultPreset('restricted')">
 <i class="fas fa-heart"></i> Restricted
 </button>
 <button class="preset-btn" onclick="applyConsultPreset('asd')">
 <i class="fas fa-heart"></i> ASD
 </button>
 <button class="preset-btn" onclick="applyConsultPreset('pda')">
 <i class="fas fa-heart"></i> PDA
 </button>
 <button class="preset-btn" onclick="applyConsultPreset('tof')">
 <i class="fas fa-heart"></i> TOF
 </button>
 </div>
 <!-- Main Content -->
 <div class="main-content" id="main-content">
 <!-- Header with Logo -->
 <header class="header">
 <div class="header-left">
 <div class="header-logo">
 <div class="vama-striped">
 <span class="v">V</span><span class="ama">AMA</span>
 <br> <p class="clinic-name">TINY HEARTS & THE KIDNEY CLINIC</p>
 </div>
 </div>

 </div>
 <div class="header-right">
 <div class="notification-icon">
 <i class="fas fa-bell"></i>
 <span class="notification-badge">3</span>
 </div>
 <div class="user-profile" id="user-profile">
 <img src="https://ui-avatars.com/api/?name=Admin+User&background=2563eb&color=fff"
alt="Admin User">
 <span id="user-name">Admin User <span class="role-badge roleadmin">Admin</span></span>
 <div class="user-dropdown" id="user-dropdown">
 <div class="user-dropdown-item active" data-role="admin">
 <i class="fas fa-user-shield"></i> Admin User
 </div>
 <div class="user-dropdown-item" data-role="receptionist">
 <i class="fas fa-user-tie"></i> Receptionist
 </div>
 </div>
 </div>
 </div>
 </header>
 <div class="page-container">
 <!-- Patient Registration Page -->
 <div class="page active" id="registration-page">
 <div class="page-title">Patient Registration Form</div>
 <form class="registration-form" id="patientForm">
 <div class="form-group">
 <div class="form-row">
 <div class="form-column">
 <label for="patientId" class="required">Patient ID</label>
 <input type="text" id="patientId" name="patientId" value="5041174" readonly>
 </div>
 </div>
 </div>
 <div class="form-group">
 <div class="form-row">
 <div class="form-column">
 <label for="firstName" class="required">First Name</label>
 <input type="text" id="firstName" name="firstName" placeholder="Enter first name"
required>
 </div>
 <div class="form-column">
 <label for="lastName" class="required">Last Name</label>
 <input type="text" id="lastName" name="lastName" placeholder="Enter last name"
required>
 </div>
 </div>
 </div>
 <div class="form-group">
 <div class="form-row">
 <div class="form-column">
 <label for="sex" class="required">Sex</label>
 <select id="sex" name="sex" required>
 <option value="" disabled selected>Select</option>
 <option value="male">Male</option>
 <option value="female">Female</option>
 <option value="other">Other</option>
 </select>
 </div>
 <div class="form-column">
 <label for="dob" class="required">Date of Birth</label>
 <input type="text" id="dob" name="dob" placeholder="mm/dd/yyyy" required>
 </div>
 </div>
 </div>
 <div class="form-group">
 <div class="form-row">
 <div class="form-column">
 <label for="email">Email</label>
 <input type="email" id="email" name="email" placeholder="Enter email">
 </div>
 <div class="form-column">
 <label for="mobile" class="required">Mobile No</label>
 <input type="tel" id="mobile" name="mobile" placeholder="Enter mobile number"
required>
 </div>
 </div>
 </div>
 <div class="form-group">
 <label for="address" class="required">Address</label>
 <textarea id="address" name="address" rows="3" placeholder="Enter full address"
required></textarea>
 </div>
 <div class="vital-signs">
 <h3 class="section-title">Vital Signs</h3>
 <div class="form-row">
 <div class="form-column">
 <label for="weight" class="required">Weight (kg)</label>
 <input type="number" id="weight" name="weight" placeholder="Enter weight"
step="0.1" required>
 </div>
 <div class="form-column">
 <label for="height" class="required">Height (cm)</label>
 <input type="number" id="height" name="height" placeholder="Enter height"
step="0.1" required>
 </div>
 </div>

 <div class="form-row">
 <div class="form-column">
 <label for="bloodPressure">Blood Pressure</label>
 <input type="text" id="bloodPressure" name="bloodPressure" placeholder="e.g.,
120/80">
 </div>
 <div class="form-column">
 <label for="heartRate">Heart Rate (BPM)</label>
 <input type="number" id="heartRate" name="heartRate" placeholder="e.g., 72">
 </div>
 <div class="form-column">
 <label for="spo2">SpO2 (%)</label>
 <input type="number" id="spo2" name="spo2" placeholder="e.g., 98" min="0"
max="100">
 </div>
 </div>
 </div>
 <div class="form-group">
 <div class="form-row">
 <div class="form-column">
 <label for="appointmentDate" class="required">Date of Appointment</label>
 <input type="date" id="appointmentDate" name="appointmentDate" required>
 </div>
 <div class="form-column">
 <label for="appointmentTime" class="required">Time of Appointment</label>
 <select id="appointmentTime" name="appointmentTime" required>
 <option value="" disabled selected>--- Select Time ---</option>
 <option value="09:00">09:00 AM</option>
 <option value="09:30">09:30 AM</option>
 <option value="10:00">10:00 AM</option>
 <option value="10:30">10:30 AM</option>
 <option value="11:00">11:00 AM</option>
 <option value="11:30">11:30 AM</option>
 <option value="12:00">12:00 PM</option>
 <option value="14:00">02:00 PM</option>
 <option value="14:30">02:30 PM</option>
 <option value="15:00">03:00 PM</option>
 <option value="15:30">03:30 PM</option>
 <option value="16:00">04:00 PM</option>
 <option value="16:30">04:30 PM</option>
 <option value="17:00">05:00 PM</option>
 </select>
 </div>
 </div>
 </div>
 <div class="form-buttons">
 <button type="submit" class="btn btn-submit">
 <i class="fas fa-check"></i> Submit
 </button>
 <button type="button" class="btn btn-clear" onclick="clearForm()">
 <i class="fas fa-times"></i> Clear Form
 </button>
 </div>
 </form>
 </div>
 <!-- Appointments Page -->
 <div class="page" id="appointments-page">
 <div class="page-title">Appointment Management</div>
 <div class="appointments-container">
 <div class="search-container">
 <div class="search-box">
 <div class="search-input">
 <i class="fas fa-search"></i>
 <input type="text" id="searchPatient" placeholder="Search by name, ID, or mobile...">
 </div>
 <div class="search-input">
 <select id="filterStatus">
 <option value="all">All Appointments</option>
 <option value="scheduled">Scheduled</option>
 <option value="completed">Completed</option>
 <option value="cancelled">Cancelled</option>
 </select>
 </div>
 </div>
 </div>
 <div class="table-container">
 <table class="appointments-table">
 <thead>
 <tr>
 <th>Patient ID</th>
 <th>Name</th>
 <th>Sex</th>
 <th>Age</th>
 <th>Mobile</th>
 <th>Appointment Date</th>
 <th>Appointment Time</th>
 <th>Status</th>
 <th>Actions</th>
 </tr>
 </thead>
 <tbody id="appointmentsTableBody">
 <!-- Table rows will be populated by JavaScript -->
 </tbody>
 </table>
 </div>
 <!-- Mobile Cards -->
 <div class="mobile-cards" id="mobileAppointmentsCards">
 <!-- Mobile appointment cards will be populated by JavaScript -->
 </div>
 </div>
 </div>
 <!-- Echo Reports Page -->
 <div class="page" id="echo-page">
 <div class="page-title">Echocardiography Reports</div>

 <!-- Search for Patient -->
 <div class="search-container">
 <div class="search-box">
 <div class="search-input">
 <i class="fas fa-search"></i>
 <input type="text" id="searchEchoPatient" placeholder="Search by Patient ID or
Name...">
 </div>
 <button class="btn btn-submit" onclick="searchEchoPatient()">
 <i class="fas fa-search"></i> Search
 </button>
 </div>
 </div>

 <!-- Echo Controls -->
 <div class="echo-container">
 <div class="echo-header">
 
 <div class="echo-controls" id="echo-controls">
 <button class="preset-btn" onclick="applyEchoPreset('Normal')">
 <i class="fas fa-heartbeat"></i> Normal
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('ASD')">
 <i class="fas fa-heart"></i> ASD
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('PDA')">
 <i class="fas fa-heart"></i> PDA
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('VSD')">
 <i class="fas fa-heart"></i> VSD
 </button>
 <button class="preset-btn" onclick="applyEchoPreset('TOF')">
 <i class="fas fa-heart"></i> TOF
 </button>
 <button class="save-btn" id="echo-save-btn" onclick="saveEchoReport()">
 <i class="fas fa-save"></i> Save Report
 </button>
 <button class="print-btn" id="echo-print-btn" onclick="window.print()">
 <i class="fas fa-print"></i> Print
 </button>
 <button class="pdf-btn" id="echo-pdf-btn" onclick="saveAsPDF()">
 <i class="fas fa-file-pdf"></i> Save as PDF
 </button>
 <button class="edit-btn" id="echo-edit-btn" onclick="toggleEchoEditMode()">
 <i class="fas fa-edit"></i> Edit Report
 </button>
 </div>
 </div>
 </div>
 <!-- Echo Edit Controls -->
 <div class="echo-edit-controls" id="echo-edit-controls">

 <div class="echo-edit-buttons">
 
 </div>

 
 <div class="echo-edit-buttons">
 
 </div>
 </div>
 <!-- Report Page -->
 <div class="report-page" id="report-page">
 <div class="report-header">
 <div class="report-logo">
 <span>VAMA<br>CLINIC</span>
 </div>
 <div class="report-vama-center">
 <div class="report-vama-striped">
 <span class="report-v">V</span><span class="report-ama">AMA</span>
 </div>
 <p class="report-clinic-name">TINY HEARTS & THE KIDNEY CLINIC</p>
 </div>
 <div class="report-header-right">
 <div>Consultation Report</div>
 <div id="report-date">Date: 12-09-2025</div>
 </div>
 </div>
 <div class="report-doctors">
 <div class="report-doctor">
 <b>Dr. Madhavi Dadwe</b><br>
 MBBS MD DrNB (Nephrology)<br>
 Consultant Nephrologist & Transplant Physician<br>
 +91 91725 20489<br>
 vamathekidneyclinic@gmail.com
 </div>
 <div class="report-doctor" style="text-align:right;">
 <b>Dr. Ashishkumar Banpurkar</b><br>
 MBBS MD DrNB (Pediatric Cardiology)<br>
 Consultant Fetal & Pediatric Cardiologist<br>
 +91 93709 94757<br>
 vamatinyhearts@gmail.com
 </div>
 </div>
 <!-- Patient Info -->
 <div class="report-patient-info">
 <table>
 <tr>
 <td><b>Name:</b> <span id="echo-patient-name">John Doe</span></td>
 <td><b>Date:</b> <span id="echo-report-date">12-09-2025</span></td>
 </tr>
 <tr>
 <td><b>Age:</b> <span id="echo-patient-age">8 years / Male</span></td>
 <td><b>HR:</b> <span id="echo-patient-hr">72 BPM</span></td>
 </tr>
 <tr>
 <td><b>Indication:</b> <span id="echo-indication">Incidental Detection of
murmur</span></td>
 <td><b>Weight:</b> <span id="echo-patient-weight">25 Kg</span></td>
 </tr>
 <tr>
 <td><b>Ref:</b> <span id="echo-ref">Shubham Bafna Sir</span></td>
 <td><b>BP:</b> <span id="echo-patient-bp">110/70 mmHg</span></td>
 </tr>
 <tr>
 <td><b>S1:</b> <span id="echo-s1">Normal</span></td>
 <td><b>S2:</b> <span id="echo-s2">Single</span></td>
 </tr>
 <tr>
 <td><b>Murmur:</b> <span id="echo-murmur">No additional Sound</span></td>
 <td><b>SPo2:</b> <span id="echo-spo2">98%</span></td>
 </tr>
 </table>
 </div>
 <div class="report-title">ECHOCARDIOGRAPHY REPORT</div>
 <div class="report-body" id="report-body">
 <div class="report-section">
 <div class="section-title">Echocardiography Diagnosis</div>
 <div id="echo-diagnosis">
 <p>STRUCTURALLY NORMAL HEART</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Normal size - Right atrium: Normal size -
Left ventricle: Normal dimensions and wall thickness - Right ventricle: Normal dimensions - Interatrial
septum: Intact - Interventricular septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology, no regurgitation - Tricuspid valve:
Normal morphology, no regurgitation - Aortic valve: Normal morphology, no stenosis/regurgitation -
Pulmonary valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions, left aortic arch - Pulmonary artery:
Normal dimensions, confluent branch PAs - No evidence of coarctation or PDA</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60-65%) -
Right ventricular systolic function: Normal - No regional wall motion abnormalities</p>
 <p>PERICARDIUM: - No pericardial effusion - Normal pericardial thickness</p>
 <p>CORONARY ARTERIES: - Normal origin and course</p>
 </div>
 </div>
 <div class="report-section">
 <div class="section-title">Impression</div>
 <div id="echo-impression">
 <p>Normal echocardiographic study with no significant structural or functional
abnormalities detected.</p>
 </div>
 </div>
 </div>
 <!-- Doctor signature -->
 <div class="report-signature">
 <b>Dr Ashishkumar Banpurkar</b><br>
 MBBS MD DrNB (Pediatric Cardiology)<br>
 Consultant Pediatric & Fetal Cardiologist
 </div>
 <!-- Footer -->
 <div class="report-footer">
 Vama Tiny Hearts & The Kidney Clinic | 203, 2nd Floor, City centre Opp. Vaibhav Talkies,
Hadapsar Pune 411028
 </div>
 </div>
 </div>
 <!-- Consultation Page -->
 <div class="page" id="consultation-page">
 <div class="page-title">Consultation Reports</div>

 <!-- Search for Patient -->
 <div class="search-container">
 <div class="search-box">
 <div class="search-input">
 <i class="fas fa-search"></i>
 <input type="text" id="searchConsultPatient" placeholder="Search by Patient ID or
Name...">
 </div>
 <button class="btn btn-submit" onclick="searchConsultPatient()">
 <i class="fas fa-search"></i> Search
 </button>
 </div>
 </div>
 <!-- Consultation Controls (Buttons at top) -->
 <div class="consult-controls">
 <button class="edit-btn" onclick="toggleConsultEditMode()">
 <i class="fas fa-edit"></i> Edit Report
 </button>
 <button class="save-btn" onclick="saveConsultationReport()">
 <i class="fas fa-save"></i> Save Report
 </button>
 <button class="print-btn" onclick="window.print()">
 <i class="fas fa-print"></i> Print
 </button>
 <button class="pdf-btn" onclick="saveAsPDF()">
 <i class="fas fa-file-pdf"></i> Save as PDF
 </button>
 
 </div>
 <!-- Consultation Edit Controls -->
 <div class="consult-edit-controls" id="consult-edit-controls">
 <h3>Edit Consultation Report</h3>

 <div class="consult-edit-section">
 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-indication">Indication</label>
 <select id="consult-edit-indication" class="consult-text-input"
onchange="updateConsultationField('indication', this.value)">
 <option value="">Select Indication</option>
 <option value="Routine Checkup">Routine Checkup</option>
 <option value="Heart Murmur">Heart Murmur</option>
 <option value="Chest Pain">Chest Pain</option>
 <option value="Shortness of Breath">Shortness of Breath</option>
 <option value="Palpitations">Palpitations</option>
 <option value="Cyanosis">Cyanosis</option>
 <option value="Poor Weight Gain">Poor Weight Gain</option>
 <option value="Syncope">Syncope</option>
 </select>
 </div>
 <div class="consult-edit-item">
 <label for="consult-edit-s2">S2</label>
 <select id="consult-edit-s2" class="consult-text-input"
onchange="updateConsultationField('s2', this.value)">
 <option value="">Select S2</option>
 <option value="Normal">Normal</option>
 <option value="Single">Single</option>
 <option value="Widely Split">Widely Split</option>
 <option value="Fixed Split">Fixed Split</option>
 <option value="Loud">Loud</option>
 <option value="Soft">Soft</option>
 </select>
 </div>
 </div>

 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-anc">ANC Details</label>
 <select id="consult-edit-anc" class="consult-text-input"
onchange="updateConsultationField('anc', this.value)">
 <option value="">Select ANC Details</option>
 <option value="Not Significant">Not Significant</option>
 <option value="Gestational Diabetes">Gestational Diabetes</option>
 <option value="Pregnancy Induced Hypertension">Pregnancy Induced
Hypertension</option>
 <option value="Oligohydramnios">Oligohydramnios</option>
 <option value="Polyhydramnios">Polyhydramnios</option>
 <option value="Fetal Echocardiography Done">Fetal Echocardiography
Done</option>
 </select>
 </div>
 <div class="consult-edit-item">
 <label for="consult-edit-device">Device</label>
 <select id="consult-edit-device" class="consult-text-input"
onchange="updateConsultationField('device', this.value)">
 <option value="">Select Device</option>
 <option value="No Device">No Device</option>
 <option value="Pacemaker">Pacemaker</option>
 <option value="ICD">ICD</option>
 <option value="CRT">CRT</option>
 </select>
 </div>
 </div>

 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-symptoms">Symptoms</label>
 <select id="consult-edit-symptoms" class="consult-text-input"
onchange="updateConsultationField('symptoms', this.value)">
 <option value="">Select Symptoms</option>
 <option value="Asymptomatic">Asymptomatic</option>
 <option value="Fatigue">Fatigue</option>
 <option value="Poor Feeding">Poor Feeding</option>
 <option value="Sweating During Feeds">Sweating During Feeds</option>
 <option value="Recurrent Respiratory Infections">Recurrent Respiratory
Infections</option>
 </select>
 </div>
 <div class="consult-edit-item">
 <label for="consult-edit-medication">Medication</label>
 <select id="consult-edit-medication" class="consult-text-input"
onchange="updateConsultationField('medication', this.value)">
 <option value="">Select Medication</option>
 <option value="No Medication">No Medication</option>
 <option value="Diuretics">Diuretics</option>
 <option value="ACE Inhibitors">ACE Inhibitors</option>
 <option value="Beta Blockers">Beta Blockers</option>
 <option value="Digoxin">Digoxin</option>
 <option value="Aspirin">Aspirin</option>
 </select>
 </div>
 </div>

 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-murmur">Murmur</label>
 <select id="consult-edit-murmur" class="consult-text-input"
onchange="updateConsultationField('murmur', this.value)">
 <option value="">Select Murmur</option>
 <option value="No Murmur">No Murmur</option>
 <option value="Systolic Murmur">Systolic Murmur</option>
 <option value="Diastolic Murmur">Diastolic Murmur</option>
 <option value="Continuous Murmur">Continuous Murmur</option>
 <option value="Innocent Murmur">Innocent Murmur</option>
 </select>
 </div>
 </div>

 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-ref">Ref</label>
 <input type="text" id="consult-edit-ref" class="consult-text-input" placeholder="Enter
reference" onchange="updateConsultationField('ref', this.value)">
 </div>
 <div class="consult-edit-item">
 <label for="consult-edit-s1">S1</label>
 <input type="text" id="consult-edit-s1" class="consult-text-input" placeholder="Enter
S1 details" onchange="updateConsultationField('s1', this.value)">
 </div>
 </div>

 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-advice">Advice</label>
 <textarea id="consult-edit-advice" class="consult-text-input" rows="3"
placeholder="Enter advice" onchange="updateConsultationField('advice', this.value)"></textarea>
 </div>
 </div>

 <div class="consult-edit-row">
 <div class="consult-edit-item">
 <label for="consult-edit-followup">Next Follow-up Date</label>
 <input type="date" id="consult-edit-followup" class="consult-text-input"
onchange="updateConsultationField('followup', this.value)">
 </div>
 </div>
 </div>
 </div>
 <!-- Consultation Report -->
 <div class="report-page" id="consultation-report-page">
 <div class="report-header">
 <div class="report-logo">
 <span>VAMA<br>CLINIC</span>
 </div>
 <div class="report-vama-center">
 <div class="report-vama-striped">
 <span class="report-v">V</span><span class="report-ama">AMA</span>
 </div>
 <p class="report-clinic-name">TINY HEARTS & THE KIDNEY CLINIC</p>
 </div>
 <div class="report-header-right">
 <div>Consultant Report</div>
 <div id="consult-report-date">Date: 12-09-2025</div>
 </div>
 </div>
 <div class="report-doctors">
 <div class="report-doctor">
 <b>Dr. Madhavi Dadwe</b><br>
 MBBS MD DrNB (Nephrology)<br>
 Consultant Nephrologist & Transplant Physician<br>
 +91 91725 20489<br>
 vamathekidneyclinic@gmail.com
 </div>
 <div class="report-doctor" style="text-align:right;">
 <b>Dr. Ashishkumar Banpurkar</b><br>
 MBBS MD DrNB (Pediatric Cardiology)<br>
 Consultant Fetal & Pediatric Cardiologist<br>
 +91 93709 94757<br>
 vamatinyhearts@gmail.com
 </div>
 </div>
 <!-- Patient Info with Indication -->
 <div class="report-patient-info consult-patient-info">
 <div class="patient-info-row">
 <div class="patient-info-item">
 <b>Patient Name:</b> <span id="consult-patient-name">John Doe</span>
 </div>
 <div class="patient-info-item">
 <b>Report Date:</b> <span id="consult-report-date-value">12-09-2025</span>
 </div>
 <div class="patient-info-item">
 <b>Age:</b> <span id="consult-patient-age">8 years / Male</span>
 </div>

 </div>

 <div class="patient-info-row">
 <div class="patient-info-item">
 <b>Ref:</b> <span id="consult-ref">Dr. Shubham Bafna</span>
 </div>
 <div class="patient-info-item">
 <b>Patient ID:</b> <span id="consult-patient-id">CR-202509</span>
 </div>
 <div class="patient-info-item">
 <b>Murmur:</b> <span id="consult-murmur">CR-2025-09-001</span>
 </div>
 </div>
 <div class="gap-line"></div>
 <div class="patient-info-row">
 <div class="patient-info-item">
 <b>Indication:</b> <span id="consult-indication">Dr. Shubham Bafna</span>
 </div>
 <div class="patient-info-item">
 <b>S1:</b> <span id="consult-s1">CR-2025-09-001</span>
 </div>
 <div class="patient-info-item">
 <b>S2:</b> <span id="consult-s2">CR-2025-09-001</span>
 </div>
 </div>

 </div>
 <div class="report-title">CONSULTATION REPORT</div>
 <div class="report-body">
 <!-- ANC and Perinatal Details -->
 <div class="report-section">
 <div class="gap-line">
 <b>ANC Detail:</b> <span id="consult-anc">Not Significant</span>
 </div>
 <div class="gap-line">
 <b>Perinatal Detail:</b> <span id="consult-perinatal">FT/AGA/LSCS/CIAB/B Weight -
/No NICU Stay</span>
 </div>
 </div>
 <!-- Device Section -->
 <div class="report-section">
 <div class="gap-line">
 <b>Device Type:</b> <span id="consult-device">No Device</span>
 </div>
 </div>
 <!-- Symptoms Section -->
 <div class="report-section">
 <div class="gap-line">
 <b>Suck-Peat-Suck Cycle:</b> <span id="consult-suck-cycle"></span>
 </div>
 <div class="gap-line">
 <b>Other Significant:</b> <span id="consult-other-significant"></span>
 </div>
 <div class="gap-line">
 <b>ECHO:</b> <span id="consult-echo">Large sized perimenbranous ventricular
septal defect with left to right shunt</span>
 </div>
 <div class="gap-line">
 <b>ECG:</b> <span id="consult-ecg">-</span>
 </div>
 </div>
 <!-- Medications Section -->
 <div class="report-section">
 <div class="gap-line">
 <b>Medications:</b> <span id="consult-medication1">NA</span>
 </div>
 </div>
 <!-- Advice Section -->
 <div class="report-section">
 <div class="gap-line">
 <b>Advice:</b> <span id="consult-advice">Routine Neonatal Care, Immunisation as
per schedule, Avoid Contact Sports X 1 month, Regular Diet, To Review with Consultant
Neonatologist/Pediatrician</span>
 </div>
 </div>
 <!-- Next Follow-up Section -->
 <div class="report-section">
 <div class="gap-line">
 <b>Next Follow-up:</b> <span id="consult-followup">1 week</span>
 </div>
 </div>
 </div>
 <!-- Doctor signature -->
 <div class="report-signature">
 <b>Dr Ashishkumar M Banpurkar</b><br>
 MBBS, MD, DNB (Pediatric Cardiology)<br>
 Consultant Pediatric & Fetal Cardiologist
 </div>
 <!-- Footer -->
 <div class="report-footer">
 Vama Tiny Hearts & The Kidney Clinic | 203, 2nd Floor, City centre Opp. Vaibhav Talkies,
Hadapsar Pune 411028
 </div>
 </div>
 </div>
 <!-- Database Page -->
 <div class="page" id="database-page">
 <div class="page-title">Patient Database</div>
 <div class="database-container">
 <div class="search-container">
 <div class="search-box">
 <div class="search-input">
 <i class="fas fa-search"></i>
 <input type="text" id="searchDatabase" placeholder="Search by name, ID, or
mobile...">
 </div>
 <div class="search-input">
 <select id="filterDatabase">
 <option value="all">All Records</option>
 <option value="registration">Registration</option>
 <option value="echo">Echo Reports</option>
 <option value="consultation">Consultation</option>
 </select>
 </div>
 </div>
 </div>
 <div class="table-container">
 <table class="database-table">
 <thead>
 <tr>
 <th>Patient ID</th>
 <th>Name</th>
 <th>Sex</th>
 <th>Age</th>
 <th>Mobile</th>
 <th>Registration Date</th>
 <th>Echo Report</th>
 <th>Consultation</th>
 <th>Actions</th>
 </tr>
 </thead>
 <tbody id="databaseTableBody">
 <!-- Table rows will be populated by JavaScript -->
 </tbody>
 </table>
 </div>
 <!-- Mobile Cards -->
 <div class="mobile-cards" id="mobileDatabaseCards">
 <!-- Mobile database cards will be populated by JavaScript -->
 </div>
 </div>
 </div>
 </div>
 <div class="footer">
 Vama Tiny Hearts & The Kidney Clinic | 203, 2nd Floor, City centre Opp. Vaibhav Talkies, Hadapsar
Pune 411028
 </div>
 </div>
 <script>
 // Sample data for demonstration
 let patients = [
 {
 id: "5041174",
 firstName: "John",
 lastName: "Doe",
 sex: "male",
 dob: "05/15/2017",
 email: "john.doe@example.com",
 mobile: "9876543210",
 address: "123 Main Street, Pune",
 weight: "25",
 height: "120",
 bloodPressure: "110/70",
 heartRate: "72",
 spo2: "98",
 appointmentDate: "2025-10-07",
 appointmentTime: "10:00",
 status: "scheduled",
 echoReports: [],
 consultations: []
 },
 {
 id: "5041175",
 firstName: "Jane",
 lastName: "Smith",
 sex: "female",
 dob: "08/22/2015",
 email: "jane.smith@example.com",
 mobile: "9876543211",
 address: "456 Oak Avenue, Pune",
 weight: "28",
 height: "125",
 bloodPressure: "115/75",
 heartRate: "68",
 spo2: "99",
 appointmentDate: "2025-10-08",
 appointmentTime: "11:00",
 status: "scheduled",
 echoReports: [],
 consultations: []
 },
 {
 id: "5041176",
 firstName: "Robert",
 lastName: "Johnson",
 sex: "male",
 dob: "03/10/2016",
 email: "robert.j@example.com",
 mobile: "9876543212",
 address: "789 Pine Road, Pune",
 weight: "26",
 height: "122",
 bloodPressure: "112/68",
 heartRate: "70",
 spo2: "97",
 appointmentDate: "2025-10-05",
 appointmentTime: "14:30",
 status: "completed",
 echoReports: [],
 consultations: []
 }
 ];
 // Set current date for reports
 const today = new Date();
 const formattedDate = today.getDate().toString().padStart(2, '0') + '-' +
 (today.getMonth() + 1).toString().padStart(2, '0') + '-' +
 today.getFullYear();
 document.getElementById('report-date').textContent = 'Date: ' + formattedDate;
 document.getElementById('consult-report-date').textContent = 'Date: ' + formattedDate;
 document.getElementById('consult-report-date-value').textContent = formattedDate;

 // Echo preset data
 const echoPresets = {
 'Normal': {
 diagnosis: `
 <p>STRUCTURALLY NORMAL HEART</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Normal size - Right atrium: Normal size - Left
ventricle: Normal dimensions and wall thickness - Right ventricle: Normal dimensions - Interatrial
septum: Intact - Interventricular septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology, no regurgitation - Tricuspid valve: Normal
morphology, no regurgitation - Aortic valve: Normal morphology, no stenosis/regurgitation - Pulmonary
valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions, left aortic arch - Pulmonary artery: Normal
dimensions, confluent branch PAs - No evidence of coarctation or PDA</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60-65%) - Right
ventricular systolic function: Normal - No regional wall motion abnormalities</p>
 <p>PERICARDIUM: - No pericardial effusion - Normal pericardial thickness</p>
 <p>CORONARY ARTERIES: - Normal origin and course</p>
 `,
 impression: `
 <p>Normal echocardiographic study with no significant structural or functional abnormalities
detected.</p>
 `
 },
 'ASD': {
 diagnosis: `
 <p>MODERATE-SIZED ATRIAL SEPTAL DEFECT (ASD)</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Mildly dilated - Right atrium: Moderately dilated
- Left ventricle: Normal dimensions - Right ventricle: Moderately dilated - Interatrial septum: Secundumtype ASD measuring 12mm - Interventricular septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology, mild regurgitation - Tricuspid valve: Normal
morphology, moderate regurgitation - Aortic valve: Normal morphology - Pulmonary valve: Normal
morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Dilated, calculated
Qp:Qs ratio of 2.5:1</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60%) - Right
ventricular systolic function: Mildly reduced</p>
 <p>SHUNT: Left-to-right shunt across ASD with evidence of right ventricular volume
overload</p>
 `,
 impression: `
 <p>Moderate-sized atrial septal defect with significant left-to-right shunt and right heart
volume overload. Consider device closure or surgical repair.</p>
 `
 },
 'VSD': {
 diagnosis: `
 <p>MODERATE PERIMEMBRANOUS VENTRICULAR SEPTAL DEFECT</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Mildly dilated - Right atrium: Normal size - Left
ventricle: Mildly dilated - Right ventricle: Normal dimensions - Interventricular septum: Perimembranous
VSD measuring 6mm</p>
 <p>VALVES: - Mitral valve: Normal morphology - Tricuspid valve: Normal morphology - Aortic
valve: Normal morphology, no prolapse - Pulmonary valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Mildly dilated, Qp:Qs
ratio of 2.2:1</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 62%) - Right
ventricular systolic function: Normal</p>
 <p>SHUNT: Restrictive left-to-right shunt with peak velocity 4.5 m/s</p>
 `,
 impression: `
 <p>Moderate perimembranous ventricular septal defect with significant left-to-right shunt.
Monitor for signs of congestive heart failure and consider surgical closure if no spontaneous
improvement.</p>
 `
 },
 'PDA': {
 diagnosis: `
 <p>MODERATE PATENT DUCTUS ARTERIOSUS</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Moderately dilated - Right atrium: Normal size -
Left ventricle: Moderately dilated - Right ventricle: Normal dimensions - Septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology - Tricuspid valve: Normal morphology - Aortic
valve: Normal morphology - Pulmonary valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Dilated - Patent ductus
arteriosus measuring 3.5mm with continuous left-to-right shunt</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 65%) - Right
ventricular systolic function: Normal</p>
 <p>HEMODYNAMICS: Continuous left-to-right shunt with diastolic flow reversal in
descending aorta</p>
 `,
 impression: `
 <p>Moderate patent ductus arteriosus with significant left-to-right shunt. Refer for device
closure or surgical ligation.</p>
 `
 },
 'TOF': {
 diagnosis: `
 <p>TETRALOGY OF FALLOT</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Normal size - Right atrium: Mildly dilated - Left
ventricle: Normal dimensions - Right ventricle: Hypertrophied - Interventricular septum: Large
malalignment VSD</p>
 <p>VALVES: - Mitral valve: Normal morphology - Tricuspid valve: Normal morphology - Aortic
valve: Overriding aorta (50%) - Pulmonary valve: Stenotic with annular hypoplasia</p>
 <p>GREAT VESSELS: - Aorta: Dilated, overriding ventricular septum - Pulmonary artery:
Hypoplastic main and branch PAs</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60%) - Right
ventricular systolic function: Moderately reduced</p>
 <p>ADDITIONAL FINDINGS: Right ventricular outflow tract obstruction with peak gradient 80
mmHg</p>
 `,
 impression: `
 <p>Tetralogy of Fallot with significant right ventricular outflow tract obstruction. Urgent
cardiology consultation and prepare for surgical repair.</p>
 `
 }
 };
 // Consultation preset data
 const consultPresets = {
 'vsd': {
 echo: "Large sized perimenbranous ventricular septal defect with left to right shunt",
 advice: "Surgical closure of VSD recommended. Pre-operative evaluation and optimizationrequired. Follow-up in 2 weeks.",
 followup: "2 weeks"
 },
 'restricted': {
 echo: "Restrictive physiology noted with evidence of diastolic dysfunction",
 advice: "Medical management with diuretics and afterload reduction. Monitor fluid status andsymptoms closely.",
 followup: "1 month"
 },
 'asd': {
 echo: "Moderate sized secundum atrial septal defect with left to right shunt",
 advice: "Device closure of ASD recommended. Pre-procedure evaluation and optimizationrequired.",
 followup: "3 weeks"
 },
 'pda': {
 echo: "Moderate sized patent ductus arteriosus with continuous left to right shunt",
 advice: "Device closure of PDA recommended. Pre-procedure evaluation required.",
 followup: "2 weeks"
 },
 'tof': {
 echo: "Tetralogy of Fallot with large VSD, overriding aorta, pulmonary stenosis and RVH",
 advice: "Surgical repair of TOF recommended. Pre-operative optimization required.",
 followup: "1 week"
 }
 };
 // Echo diagnosis options
 const echoDiagnosisOptions = {
 'normal': `
 <p>STRUCTURALLY NORMAL HEART</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Normal size - Right atrium: Normal size - Left
ventricle: Normal dimensions and wall thickness - Right ventricle: Normal dimensions - Interatrial
septum: Intact - Interventricular septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology, no regurgitation - Tricuspid valve: Normal
morphology, no regurgitation - Aortic valve: Normal morphology, no stenosis/regurgitation - Pulmonary
valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions, left aortic arch - Pulmonary artery: Normal
dimensions, confluent branch PAs - No evidence of coarctation or PDA</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60-65%) - Right
ventricular systolic function: Normal - No regional wall motion abnormalities</p>
 <p>PERICARDIUM: - No pericardial effusion - Normal pericardial thickness</p>
 <p>CORONARY ARTERIES: - Normal origin and course</p>
 `,
 'asd': `
 <p>MODERATE-SIZED ATRIAL SEPTAL DEFECT (ASD)</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Mildly dilated - Right atrium: Moderately dilated -
Left ventricle: Normal dimensions - Right ventricle: Moderately dilated - Interatrial septum: Secundumtype ASD measuring 12mm - Interventricular septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology, mild regurgitation - Tricuspid valve: Normal
morphology, moderate regurgitation - Aortic valve: Normal morphology - Pulmonary valve: Normal
morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Dilated, calculated Qp:Qs
ratio of 2.5:1</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60%) - Right
ventricular systolic function: Mildly reduced</p>
 <p>SHUNT: Left-to-right shunt across ASD with evidence of right ventricular volume
overload</p>
 `,
 'vsd': `
 <p>MODERATE PERIMEMBRANOUS VENTRICULAR SEPTAL DEFECT</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Mildly dilated - Right atrium: Normal size - Left
ventricle: Mildly dilated - Right ventricle: Normal dimensions - Interventricular septum: Perimembranous
VSD measuring 6mm</p>
 <p>VALVES: - Mitral valve: Normal morphology - Tricuspid valve: Normal morphology - Aortic
valve: Normal morphology, no prolapse - Pulmonary valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Mildly dilated, Qp:Qs ratio
of 2.2:1</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 62%) - Right
ventricular systolic function: Normal</p>
 <p>SHUNT: Restrictive left-to-right shunt with peak velocity 4.5 m/s</p>
 `,
 'pda': `
 <p>MODERATE PATENT DUCTUS ARTERIOSUS</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Moderately dilated - Right atrium: Normal size -
Left ventricle: Moderately dilated - Right ventricle: Normal dimensions - Septum: Intact</p>
 <p>VALVES: - Mitral valve: Normal morphology - Tricuspid valve: Normal morphology - Aortic
valve: Normal morphology - Pulmonary valve: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Dilated - Patent ductus
arteriosus measuring 3.5mm with continuous left-to-right shunt</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 65%) - Right
ventricular systolic function: Normal</p>
 <p>HEMODYNAMICS: Continuous left-to-right shunt with diastolic flow reversal in descending
aorta</p>
 `,
 'tof': `
 <p>TETRALOGY OF FALLOT</p>
 <p>CHAMBERS AND SEPTUM: - Left atrium: Normal size - Right atrium: Mildly dilated - Left
ventricle: Normal dimensions - Right ventricle: Hypertrophied - Interventricular septum: Large
malalignment VSD</p>
 <p>VALVES: - Mitral valve: Normal morphology - Tricuspid valve: Normal morphology - Aortic
valve: Overriding aorta (50%) - Pulmonary valve: Stenotic with annular hypoplasia</p>
 <p>GREAT VESSELS: - Aorta: Dilated, overriding ventricular septum - Pulmonary artery:
Hypoplastic main and branch PAs</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal (EF 60%) - Right
ventricular systolic function: Moderately reduced</p>
 <p>ADDITIONAL FINDINGS: Right ventricular outflow tract obstruction with peak gradient 80
mmHg</p>
 `,
 'pulmonary_stenosis': `
 <p>MODERATE PULMONARY STENOSIS</p>
 <p>CHAMBERS AND SEPTUM: - Right atrium: Mildly dilated - Right ventricle: Hypertrophied -
Other chambers: Normal dimensions - Septum: Intact</p>
 <p>VALVES: - Pulmonary valve: Doming with restricted opening, peak gradient 50 mmHg -
Other valves: Normal morphology</p>
 <p>GREAT VESSELS: - Pulmonary artery: Post-stenotic dilation - Aorta: Normal dimensions</p>
 <p>VENTRICULAR FUNCTION: - Right ventricular systolic function: Mildly reduced - Left
ventricular systolic function: Normal</p>
 `,
 'aortic_stenosis': `
 <p>MODERATE AORTIC STENOSIS</p>
 <p>CHAMBERS AND SEPTUM: - Left ventricle: Concentrically hypertrophied - Other chambers:
Normal dimensions - Septum: Intact</p>
 <p>VALVES: - Aortic valve: Bicuspid with restricted opening, peak gradient 60 mmHg - Other
valves: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Normal dimensions - Pulmonary artery: Normal dimensions</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal - Right ventricular
systolic function: Normal</p>
 `,
 'coarctation': `
 <p>COARCTATION OF AORTA</p>
 <p>CHAMBERS AND SEPTUM: - Left ventricle: Hypertrophied - Other chambers: Normal
dimensions - Septum: Intact</p>
 <p>VALVES: - All valves: Normal morphology</p>
 <p>GREAT VESSELS: - Aorta: Discrete narrowing in the descending aorta with peak gradient 40
mmHg - Pulmonary artery: Normal dimensions</p>
 <p>VENTRICULAR FUNCTION: - Left ventricular systolic function: Normal - Right ventricular
systolic function: Normal</p>
 `
 };
 // Echo impression options
 const echoImpressionOptions = {
 'normal': `<p>Normal echocardiographic study with no significant structural or functional
abnormalities detected.</p>`,
 'mild': `<p>Mild abnormality detected on echocardiography. Clinical correlation advised. Followup recommended in 6-12 months.</p>`,
 'moderate': `<p>Moderate abnormality requiring further evaluation and possible intervention.
Cardiology follow-up recommended.</p>`,
 'severe': `<p>Severe abnormality requiring urgent intervention. Immediate cardiology
consultation recommended.</p>`,
 'followup': `<p>Abnormality detected requiring follow-up echocardiography in 3-6 months to
monitor progression.</p>`,
 'surgical': `<p>Surgical intervention recommended based on echocardiographic findings. Discuss
with cardiothoracic surgeon.</p>`,
 'medical': `<p>Medical management recommended based on echocardiographic findings.
Cardiology follow-up advised.</p>`
 };
 // Apply echo preset
 function applyEchoPreset(presetName) {
 const preset = echoPresets[presetName];
 if (preset) {
 document.getElementById('echo-diagnosis').innerHTML = preset.diagnosis;
 document.getElementById('echo-impression').innerHTML = preset.impression;

 // Update indication based on preset
 const indicationMap = {
 'Normal': 'Incidental Detection of murmur',
 'ASD': 'Evaluation of heart murmur',
 'VSD': 'Loud holosystolic murmur',
 'PDA': 'Continuous machinery murmur',
 'TOF': 'Cyanosis and systolic murmur'
 };

 document.getElementById('echo-indication').textContent = indicationMap[presetName];

 alert(`${presetName} echo preset applied successfully!`);
 }
 }
 // Apply consultation preset
 function applyConsultPreset(presetName) {
 const preset = consultPresets[presetName];
 if (preset) {
 document.getElementById('consult-echo').textContent = preset.echo;
 document.getElementById('consult-advice').textContent = preset.advice;
 document.getElementById('consult-followup').textContent = preset.followup;

 alert(`${presetName.toUpperCase()} consultation preset applied successfully!`);
 }
 }
 // Toggle echo edit mode
 function toggleEchoEditMode() {
 const editControls = document.getElementById('echo-edit-controls');
 const isActive = editControls.classList.contains('active');

 if (isActive) {
 editControls.classList.remove('active');
 document.getElementById('echo-edit-btn').innerHTML = '<i class="fas fa-edit"></i> EditReport';
 } else {
 editControls.classList.add('active');
 document.getElementById('echo-edit-btn').innerHTML = '<i class="fas fa-check"></i> CloseEditor';
 }
 }
 // Apply echo diagnosis
 function applyEchoDiagnosis(diagnosisType) {
 document.getElementById('echo-diagnosis').innerHTML = echoDiagnosisOptions[diagnosisType]
|| '';
 }
 // Apply echo impression
 function applyEchoImpression(impressionType) {
 document.getElementById('echo-impression').innerHTML =
echoImpressionOptions[impressionType] || '';
 }
 // Toggle consultation edit mode
 function toggleConsultEditMode() {
 const editControls = document.getElementById('consult-edit-controls');
 const isActive = editControls.classList.contains('active');

 if (isActive) {
 editControls.classList.remove('active');
 } else {
 editControls.classList.add('active');
 }
 }
 // Update consultation field
 function updateConsultationField(field, value) {
 document.getElementById(`consult-${field}`).textContent = value;
 }
 // Save echo report
 function saveEchoReport() {
 const searchTerm = document.getElementById('searchEchoPatient').value.trim();
 if (!searchTerm) {
 alert('Please search for a patient first before saving the report.');
 return;
 }

 const patient = findPatient(searchTerm);
 if (patient) {
 // Create echo report object
 const echoReport = {
 date: document.getElementById('echo-report-date').textContent,
 indication: document.getElementById('echo-indication').textContent,
 diagnosis: document.getElementById('echo-diagnosis').innerHTML,
 impression: document.getElementById('echo-impression').innerHTML
 };

 // Add to patient's echo reports
 patient.echoReports.push(echoReport);

 alert('Echo report saved successfully!');
 updateDatabaseTable();
 } else {
 alert('Patient not found. Please search for a valid patient.');
 }
 }
 // Save consultation report
 function saveConsultationReport() {
 const searchTerm = document.getElementById('searchConsultPatient').value.trim();
 if (!searchTerm) {
 alert('Please search for a patient first before saving the report.');
 return;
 }

 const patient = findPatient(searchTerm);
 if (patient) {
 // Create consultation report object
 const consultation = {
 date: document.getElementById('consult-report-date-value').textContent,
 indication: document.getElementById('consult-indication').textContent,
 anc: document.getElementById('consult-anc').textContent,
 perinatal: document.getElementById('consult-perinatal').textContent,
 device: document.getElementById('consult-device').textContent,
 echo: document.getElementById('consult-echo').textContent,
 ecg: document.getElementById('consult-ecg').textContent,
 advice: document.getElementById('consult-advice').textContent,
 followup: document.getElementById('consult-followup').textContent
 };

 // Add to patient's consultations
 patient.consultations.push(consultation);

 alert('Consultation report saved successfully!');
 updateDatabaseTable();
 } else {
 alert('Patient not found. Please search for a valid patient.');
 }
 }
 // Save as PDF
 function saveAsPDF() {
 alert('In a real implementation, this would generate and download a PDF file.');
 // This would typically use a library like jsPDF or html2pdf.js
 }
 // Search for patient in echo page
 function searchEchoPatient() {
 const searchTerm = document.getElementById('searchEchoPatient').value.trim();
 if (!searchTerm) {
 alert('Please enter a patient ID or name to search.');
 return;
 }

 const patient = findPatient(searchTerm);
 if (patient) {
 // Update echo report with patient data
 document.getElementById('echo-patient-name').textContent = `${patient.firstName}
${patient.lastName}`;
 document.getElementById('echo-patient-age').textContent = `${calculateAge(patient.dob)}
years / ${patient.sex.charAt(0).toUpperCase() + patient.sex.slice(1)}`;
 document.getElementById('echo-patient-weight').textContent = `${patient.weight} Kg`;
 document.getElementById('echo-patient-bp').textContent = patient.bloodPressure;
 document.getElementById('echo-patient-hr').textContent = `${patient.heartRate} BPM`;
 document.getElementById('echo-spo2').textContent = `${patient.spo2}%`;

 // Set current date
 document.getElementById('echo-report-date').textContent = formattedDate;

 alert(`Patient found: ${patient.firstName} ${patient.lastName}`);
 } else {
 alert('Patient not found. Please check the ID or name and try again.');
 }
 }
 // Search for patient in consultation page
 function searchConsultPatient() {
 const searchTerm = document.getElementById('searchConsultPatient').value.trim();
 if (!searchTerm) {
 alert('Please enter a patient ID or name to search.');
 return;
 }

 const patient = findPatient(searchTerm);
 if (patient) {
 // Update consultation report with patient data
 document.getElementById('consult-patient-name').textContent = `${patient.firstName}
${patient.lastName}`;
 document.getElementById('consult-patient-age').textContent = `${calculateAge(patient.dob)}
years / ${patient.sex.charAt(0).toUpperCase() + patient.sex.slice(1)}`;
 document.getElementById('consult-patient-id').textContent = patient.id;

 // Set current date
 document.getElementById('consult-report-date-value').textContent = formattedDate;

 alert(`Patient found: ${patient.firstName} ${patient.lastName}`);
 } else {
 alert('Patient not found. Please check the ID or name and try again.');
 }
 }
 // Find patient by ID or name
 function findPatient(searchTerm) {
 return patients.find(patient =>
 patient.id.toLowerCase().includes(searchTerm.toLowerCase()) ||
 `${patient.firstName} ${patient.lastName}`.toLowerCase().includes(searchTerm.toLowerCase())
||
 patient.mobile.includes(searchTerm)
 );
 }
 // Navigation between pages
 document.querySelectorAll('.sidebar-menu a, .bottom-nav-item').forEach(tab => {
 tab.addEventListener('click', function(e) {
 e.preventDefault();

 // Update active tab
 document.querySelectorAll('.sidebar-menu a, .bottom-nav-item').forEach(t => t.classList.remove('active'));
 this.classList.add('active');

 // Show corresponding page
 const pageId = this.getAttribute('data-page');
 if (pageId) {
 document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
 document.getElementById(`${pageId}-page`).classList.add('active');

 // Update header
 if (pageId === 'registration') {
 document.getElementById('page-header').textContent = 'Patient Registration Form';
 document.getElementById('page-description').textContent = 'Register new patients andschedule appointments';
 } else if (pageId === 'appointments') {
 document.getElementById('page-header').textContent = 'Appointment Management';
 document.getElementById('page-description').textContent = 'Manage and track all patientappointments';
 updateAppointmentsTable();
 } else if (pageId === 'echo') {
 document.getElementById('page-header').textContent = 'Echocardiography Reports';
 document.getElementById('page-description').textContent = 'Generate and manageechocardiography reports';
 } else if (pageId === 'consultation') {
 document.getElementById('page-header').textContent = 'Consultation Reports';
 document.getElementById('page-description').textContent = 'Generate and manageconsultation reports';
 } else if (pageId === 'database') {
 document.getElementById('page-header').textContent = 'Patient Database';
 document.getElementById('page-description').textContent = 'View all patient records andreports';
 updateDatabaseTable();
 }

 // Close sidebar on mobile after selection
 if (window.innerWidth <= 992) {
 closeSidebar();
 }
 }
 });
 });
 // Form submission handler
 document.getElementById('patientForm').addEventListener('submit', function(e) {
 e.preventDefault();

 // Basic validation
 const requiredFields = document.querySelectorAll('input[required], select[required]');
 let isValid = true;

 requiredFields.forEach(field => {
 if (!field.value.trim()) {
 isValid = false;
 field.style.borderColor = '#e74c3c';
 } else {
 field.style.borderColor = '#ddd';
 }
 });

 if (isValid) {
 // Create new patient object
 const newPatient = {
 id: document.getElementById('patientId').value,
 firstName: document.getElementById('firstName').value,
 lastName: document.getElementById('lastName').value,
 sex: document.getElementById('sex').value,
 dob: document.getElementById('dob').value,
 email: document.getElementById('email').value,
 mobile: document.getElementById('mobile').value,
 address: document.getElementById('address').value,
 weight: document.getElementById('weight').value,
 height: document.getElementById('height').value,
 bloodPressure: document.getElementById('bloodPressure').value,
 heartRate: document.getElementById('heartRate').value,
 spo2: document.getElementById('spo2').value,
 appointmentDate: document.getElementById('appointmentDate').value,
 appointmentTime: document.getElementById('appointmentTime').value,
 status: 'scheduled',
 echoReports: [],
 consultations: []
 };

 // Add to patients array
 patients.push(newPatient);

 // Show success message
 alert('Patient registration submitted successfully!');

 // Clear form and generate new patient ID
 clearForm();
 generateNewPatientId();

 // Switch to appointments page
 document.querySelector('.sidebar-menu a[data-page="appointments"]').click();
 } else {
 alert('Please fill in all required fields.');
 }
 });
 // Clear form function
 function clearForm() {
 if (confirm('Are you sure you want to clear all form data?')) {
 document.getElementById('patientForm').reset();

 // Reset border colors
 const fields = document.querySelectorAll('input, select');
 fields.forEach(field => {
 field.style.borderColor = '#ddd';
 });

 // Set default appointment date to today
 const today = new Date();
 const formattedDate = today.toISOString().split('T')[0];
 document.getElementById('appointmentDate').value = formattedDate;
 }
 }
 // Generate new patient ID
 function generateNewPatientId() {
 const newId = parseInt(patients[patients.length - 1].id) + 1;
 document.getElementById('patientId').value = newId;
 }
 // Format date input
 document.getElementById('dob').addEventListener('input', function(e) {
 let value = e.target.value.replace(/\D/g, '');

 if (value.length >= 2) {
 value = value.substring(0, 2) + '/' + value.substring(2);
 }
 if (value.length >= 5) {
 value = value.substring(0, 5) + '/' + value.substring(5, 9);
 }

 e.target.value = value;
 });
 // Calculate age from date of birth
 function calculateAge(dob) {
 const birthDate = new Date(dob);
 const today = new Date();
 let age = today.getFullYear() - birthDate.getFullYear();
 const monthDiff = today.getMonth() - birthDate.getMonth();

 if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
 age--;
 }

 return age;
 }
 // Update appointments table
 function updateAppointmentsTable() {
 const tableBody = document.getElementById('appointmentsTableBody');
 const mobileCards = document.getElementById('mobileAppointmentsCards');
 const searchTerm = document.getElementById('searchPatient').value.toLowerCase();
 const statusFilter = document.getElementById('filterStatus').value;

 // Clear table and cards
 tableBody.innerHTML = '';
 mobileCards.innerHTML = '';

 // Filter patients based on search and status
 const filteredPatients = patients.filter(patient => {
 const matchesSearch =
 patient.id.toLowerCase().includes(searchTerm) ||
 `${patient.firstName} ${patient.lastName}`.toLowerCase().includes(searchTerm) ||
 patient.mobile.includes(searchTerm);

 const matchesStatus = statusFilter === 'all' || patient.status === statusFilter;

 return matchesSearch && matchesStatus;
 });

 // Add rows to table
 filteredPatients.forEach(patient => {
 const age = calculateAge(patient.dob);
 const row = document.createElement('tr');

 row.innerHTML = `
 <td>${patient.id}</td>
 <td>${patient.firstName} ${patient.lastName}</td>
 <td>${patient.sex.charAt(0).toUpperCase() + patient.sex.slice(1)}</td>
 <td>${age} years</td>
 <td>${patient.mobile}</td>
 <td>${formatDate(patient.appointmentDate)}</td>
 <td>${formatTime(patient.appointmentTime)}</td>
 <td><span class="status-badge status-
${patient.status}">${patient.status.charAt(0).toUpperCase() + patient.status.slice(1)}</span></td>
 <td>
 <button class="action-btn btn-edit" onclick="editPatient('${patient.id}')"><i class="fas faedit"></i></button>
 <button class="action-btn btn-delete" onclick="deletePatient('${patient.id}')"><i class="fas
fa-trash"></i></button>
 </td>
 `;

 tableBody.appendChild(row);
 });

 // Add mobile cards
 filteredPatients.forEach(patient => {
 const age = calculateAge(patient.dob);
 const card = document.createElement('div');
 card.className = 'mobile-card';

 card.innerHTML = `
 <div class="mobile-card-row">
 <span class="mobile-card-label">Patient ID:</span>
 <span>${patient.id}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Name:</span>
 <span>${patient.firstName} ${patient.lastName}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Sex:</span>
 <span>${patient.sex.charAt(0).toUpperCase() + patient.sex.slice(1)}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Age:</span>
 <span>${age} years</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Mobile:</span>
 <span>${patient.mobile}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Appointment Date:</span>
 <span>${formatDate(patient.appointmentDate)}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Appointment Time:</span>
 <span>${formatTime(patient.appointmentTime)}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Status:</span>
 <span class="status-badge status-
${patient.status}">${patient.status.charAt(0).toUpperCase() + patient.status.slice(1)}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Actions:</span>
 <span>
 <button class="action-btn btn-edit" onclick="editPatient('${patient.id}')"><i class="fas faedit"></i></button>
 <button class="action-btn btn-delete" onclick="deletePatient('${patient.id}')"><i
class="fas fa-trash"></i></button>
 </span>
 </div>
 `;

 mobileCards.appendChild(card);
 });

 // If no patients found
 if (filteredPatients.length === 0) {
 const row = document.createElement('tr');
 row.innerHTML = `<td colspan="9" style="text-align: center;">No appointments found</td>`;
 tableBody.appendChild(row);

 const card = document.createElement('div');
 card.className = 'mobile-card';
 card.innerHTML = `<div style="text-align: center;">No appointments found</div>`;
 mobileCards.appendChild(card);
 }
 }
 // Update database table
 function updateDatabaseTable() {
 const tableBody = document.getElementById('databaseTableBody');
 const mobileCards = document.getElementById('mobileDatabaseCards');
 const searchTerm = document.getElementById('searchDatabase').value.toLowerCase();
 const filterType = document.getElementById('filterDatabase').value;

 // Clear table and cards
 tableBody.innerHTML = '';
 mobileCards.innerHTML = '';

 // Filter patients based on search and type
 const filteredPatients = patients.filter(patient => {
 const matchesSearch =
 patient.id.toLowerCase().includes(searchTerm) ||
 `${patient.firstName} ${patient.lastName}`.toLowerCase().includes(searchTerm) ||
 patient.mobile.includes(searchTerm);

 let matchesType = true;
 if (filterType === 'echo') {
 matchesType = patient.echoReports.length > 0;
 } else if (filterType === 'consultation') {
 matchesType = patient.consultations.length > 0;
 }

 return matchesSearch && matchesType;
 });

 // Add rows to table
 filteredPatients.forEach(patient => {
 const age = calculateAge(patient.dob);
 const row = document.createElement('tr');

 row.innerHTML = `
 <td>${patient.id}</td>
 <td>${patient.firstName} ${patient.lastName}</td>
 <td>${patient.sex.charAt(0).toUpperCase() + patient.sex.slice(1)}</td>
 <td>${age} years</td>
 <td>${patient.mobile}</td>
 <td>${formatDate(patient.appointmentDate)}</td>
 <td>${patient.echoReports.length} report(s)</td>
 <td>${patient.consultations.length} report(s)</td>
 <td>
 <button class="action-btn btn-edit" onclick="viewPatientDetails('${patient.id}')"><i
class="fas fa-eye"></i></button>
 <button class="action-btn btn-delete" onclick="deletePatient('${patient.id}')"><i class="fas
fa-trash"></i></button>
 </td>
 `;

 tableBody.appendChild(row);
 });

 // Add mobile cards
 filteredPatients.forEach(patient => {
 const age = calculateAge(patient.dob);
 const card = document.createElement('div');
 card.className = 'mobile-card';

 card.innerHTML = `
 <div class="mobile-card-row">
 <span class="mobile-card-label">Patient ID:</span>
 <span>${patient.id}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Name:</span>
 <span>${patient.firstName} ${patient.lastName}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Sex:</span>
 <span>${patient.sex.charAt(0).toUpperCase() + patient.sex.slice(1)}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Age:</span>
 <span>${age} years</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Mobile:</span>
 <span>${patient.mobile}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Registration Date:</span>
 <span>${formatDate(patient.appointmentDate)}</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Echo Reports:</span>
 <span>${patient.echoReports.length} report(s)</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Consultations:</span>
 <span>${patient.consultations.length} report(s)</span>
 </div>
 <div class="mobile-card-row">
 <span class="mobile-card-label">Actions:</span>
 <span>
 <button class="action-btn btn-edit" onclick="viewPatientDetails('${patient.id}')"><i
class="fas fa-eye"></i></button>
 <button class="action-btn btn-delete" onclick="deletePatient('${patient.id}')"><i
class="fas fa-trash"></i></button>
 </span>
 </div>
 `;

 mobileCards.appendChild(card);
 });

 // If no patients found
 if (filteredPatients.length === 0) {
 const row = document.createElement('tr');
 row.innerHTML = `<td colspan="9" style="text-align: center;">No records found</td>`;
 tableBody.appendChild(row);

 const card = document.createElement('div');
 card.className = 'mobile-card';
 card.innerHTML = `<div style="text-align: center;">No records found</div>`;
 mobileCards.appendChild(card);
 }
 }
 // Format date for display
 function formatDate(dateString) {
 const date = new Date(dateString);
 return date.toLocaleDateString('en-US', {
 year: 'numeric',
 month: '2-digit',
 day: '2-digit'
 });
 }
 // Format time for display
 function formatTime(timeString) {
 const [hours, minutes] = timeString.split(':');
 const hour = parseInt(hours);
 const ampm = hour >= 12 ? 'PM' : 'AM';
 const displayHour = hour % 12 || 12;
 return `${displayHour}:${minutes} ${ampm}`;
 }
 // Search and filter functionality
 document.getElementById('searchPatient').addEventListener('input', updateAppointmentsTable);
 document.getElementById('filterStatus').addEventListener('change', updateAppointmentsTable);
 document.getElementById('searchDatabase').addEventListener('input', updateDatabaseTable);
 document.getElementById('filterDatabase').addEventListener('change', updateDatabaseTable);
 // Edit patient function
 function editPatient(patientId) {
 const patient = patients.find(p => p.id === patientId);
 if (patient) {
 // Populate form with patient data
 document.getElementById('patientId').value = patient.id;
 document.getElementById('firstName').value = patient.firstName;
 document.getElementById('lastName').value = patient.lastName;
 document.getElementById('sex').value = patient.sex;
 document.getElementById('dob').value = patient.dob;
 document.getElementById('email').value = patient.email;
 document.getElementById('mobile').value = patient.mobile;
 document.getElementById('address').value = patient.address;
 document.getElementById('weight').value = patient.weight;
 document.getElementById('height').value = patient.height;
 document.getElementById('bloodPressure').value = patient.bloodPressure;
 document.getElementById('heartRate').value = patient.heartRate;
 document.getElementById('spo2').value = patient.spo2;
 document.getElementById('appointmentDate').value = patient.appointmentDate;
 document.getElementById('appointmentTime').value = patient.appointmentTime;

 // Switch to registration page
 document.querySelector('.sidebar-menu a[data-page="registration"]').click();

 // Scroll to top
 window.scrollTo(0, 0);
 }
 }
 // View patient details
 function viewPatientDetails(patientId) {
 const patient = patients.find(p => p.id === patientId);
 if (patient) {
 alert(`Patient Details:\n\nID: ${patient.id}\nName: ${patient.firstName}
${patient.lastName}\nSex: ${patient.sex}\nAge: ${calculateAge(patient.dob)} years\nMobile:
${patient.mobile}\nEcho Reports: ${patient.echoReports.length}\nConsultations:
${patient.consultations.length}`);
 }
 }
 // Delete patient function
 function deletePatient(patientId) {
 if (confirm('Are you sure you want to delete this patient record?')) {
 patients = patients.filter(p => p.id !== patientId);
 updateAppointmentsTable();
 updateDatabaseTable();
 }
 }
 // Mobile sidebar functions
 function toggleSidebar() {
 const sidebar = document.getElementById('sidebar');
 const overlay = document.getElementById('sidebar-overlay');

 sidebar.classList.toggle('active');
 overlay.classList.toggle('active');
 }
 function closeSidebar() {
 const sidebar = document.getElementById('sidebar');
 const overlay = document.getElementById('sidebar-overlay');

 sidebar.classList.remove('active');
 overlay.classList.remove('active');
 }
 // Mobile report controls functionality
 document.getElementById('mobile-preset-btn').addEventListener('click', function() {
 const expanded = document.getElementById('mobile-preset-expanded');
 expanded.classList.toggle('active');
 });
 document.getElementById('mobile-edit-btn').addEventListener('click', function() {
 const currentPage = document.querySelector('.page.active').id;
 if (currentPage === 'echo-page') {
 toggleEchoEditMode();
 } else if (currentPage === 'consultation-page') {
 toggleConsultEditMode();
 }
 });
 document.getElementById('mobile-save-btn').addEventListener('click', function() {
 const currentPage = document.querySelector('.page.active').id;
 if (currentPage === 'echo-page') {
 saveEchoReport();
 } else if (currentPage === 'consultation-page') {
 saveConsultationReport();
 }
 });
 document.getElementById('mobile-print-btn').addEventListener('click', function() {
 window.print();
 });
 document.getElementById('mobile-pdf-btn').addEventListener('click', function() {
 saveAsPDF();
 });
 // Close expanded controls when clicking outside
 document.addEventListener('click', function(e) {
 const expanded = document.getElementById('mobile-preset-expanded');
 const presetBtn = document.getElementById('mobile-preset-btn');

 if (expanded.classList.contains('active') &&
 !expanded.contains(e.target) &&
 !presetBtn.contains(e.target)) {
 expanded.classList.remove('active');
 }
 });
 // Initialize the page
 document.addEventListener('DOMContentLoaded'), function() {
 const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
 const sidebarOverlay = document.getElementById('sidebar-overlay');
 const userProfile = document.getElementById('user-profile');
 const userDropdown = document.getElementById('user-dropdown');
 const dropdownItems = document.querySelectorAll('.user-dropdown-item');

 // Set default appointment date to today
 const today = new Date();
 const formattedDate = today.toISOString().split('T')[0];
 document.getElementById('appointmentDate').value = formattedDate;

 // Initialize appointments table
 updateAppointmentsTable();

 // Initialize database table
 updateDatabaseTable();

 // Toggle mobile sidebar
 mobileMenuToggle.addEventListener('click', function(e) {
 e.stopPropagation();
 toggleSidebar();
 });

 // Close sidebar when clicking on overlay
 sidebarOverlay.addEventListener('click', function() {
 closeSidebar();
 });

 // Toggle user dropdown
 userProfile.addEventListener('click', function(e) {
 e.stopPropagation();
 userDropdown.classList.toggle('active');
 });

 // Close dropdown when clicking elsewhere
 document.addEventListener('click', function() {
 userDropdown.classList.remove('active');
 });

 // Handle role selection
 dropdownItems.forEach(item => {
 item.addEventListener('click', function() {
 const role = this.getAttribute('data-role');

 // Update active state in dropdown
 dropdownItems.forEach(i => i.classList.remove('active'));
 this.classList.add('active');

 // Update user display
 const userName = document.getElementById('user-name');
 if (role === 'admin') {
 userName.innerHTML = 'Admin User <span class="role-badge role-admin">Admin</span>';
 userProfile.querySelector('img').src = 'https://ui-avatars.com/api/?name=Admin+User&background=2563eb&color=fff';
 } else {
 userName.innerHTML = 'Receptionist <span class="role-badge rolereceptionist">Receptionist</span>';
 userProfile.querySelector('img').src = 'https://ui-avatars.com/api/?name=Receptionist&background=10b981&color=fff';
 }

 // Close dropdown
 userDropdown.classList.remove('active');
 });
 });
 }
 </script>
</body>
</html>